// Minimal settings.gradle for Flutter module
// This isolates the Flutter module's Gradle build from the parent project

pluginManagement {
    // Find Flutter SDK
    def flutterSdkPath = System.getenv("FLUTTER_ROOT") ?: System.getenv("FLUTTER_HOME") ?: {
        def properties = new Properties()
        def propertiesFile = new File(rootProject.projectDir.parentFile.parentFile, "local.properties")
        if (propertiesFile.exists()) {
            properties.withInputStream { properties.load(it) }
        }
        return properties.getProperty("flutter.sdk")
    }()

    if (flutterSdkPath != null) {
        def flutterPluginPath = new File(flutterSdkPath, "packages/flutter_tools/gradle")
        if (flutterPluginPath.exists()) {
            includeBuild flutterPluginPath
        }
    }

    repositories {
        google()
        maven {
            url "https://storage.googleapis.com/download.flutter.io"
        }
        gradlePluginPortal()
        mavenCentral()
    }
}

dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
    repositories {
        google()
        maven {
            url "https://storage.googleapis.com/download.flutter.io"
        }
        mavenCentral()
    }
}

// Include only the :app project - this is the actual Flutter Android module
include ':app'

rootProject.name = "flutter_workflow_editor"